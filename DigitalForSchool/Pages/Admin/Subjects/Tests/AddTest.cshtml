@page "{id}"
@model DigitalForSchool.Pages.Admin.Subjects.Tests.AddTestModel
@{
    Layout = "_Layout";
    ViewData["Title"] = "Создать новый тест";
}


@if (Model.Test == null)
{
    <h3>Тест уже добавлен</h3>
    <h4><a asp-page="Edit" class="btn btn-primary">Редактировать тест</a></h4>
}
else
{
    <h2>@ViewData["Title"]</h2>
    <form method="post" class="form-horizontal">
        <input type="hidden" asp-for="Test.Id"/>
        <button type="submit" class="btn btn-primary">Сохранить тест</button>
        <div asp-validation-summary="ModelOnly"></div>
        <div class="form-group d-flex flex-column align-items-center">
            <label asp-for="Test.Name">Название теста</label>
            <div class="col-md-3">
                <input asp-for="Test.Name" class="form-control" />
                <span asp-validation-for="Test.Name" class="text-danger"></span>
            </div>
            <div>
                <button type="button" class="btn btn-secondary" id="addQuestion">Добавить вопрос</button>
            </div>
        </div>
        <div id="Questions" class="mt-2 row d-flex flex-column align-items-center">
            @for (int i = 0; i < Model.Test.Questions.Count; i++)
            {
                <div class="row question" id="@i">
                    <div class="form-group col-md-3" id="@i">
                        <label asp-for="Test.Questions[i].Name">Вопрос</label>
                        <div class="input-group" id="inp @i">
                            <textarea asp-for="Test.Questions[i].Name" class="form-control" />
                            <button type="button" class="btn btn-secondary remove">Удалить</button>
                            <span asp-validation-for="Test.Questions[i].Name" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="answers">
                        @foreach (var answer in Model.Test.Questions[i].Answers)
                        {
                            <div class="row" id="AnswQuest @i">
                                <div class="form-group answer  ps-4">
                                    <label asp-for="@answer">Ответы </label>
                                    <div class="input-group" id="inp+@i">
                                        <input type="radio" name="@i" value="true" />
                                        <input asp-for="@answer.Text" class="form-control" />
                                        <button type="button" class="btn btn-secondary remove">Удалить</button>
                                        <span asp-validation-for="@answer.Text" class="text-danger"></span>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            }
        </div>
    </form>

}

@section Scripts{
    <script src="~/js/addQuestions.js"></script>
}
